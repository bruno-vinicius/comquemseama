"use strict";define("comboBoxInput",["lodash","react","core","santaProps","textCommon"],function(e,t,i,o,s){function a(e){return t.DOM.option({value:e.value,default:e.default,style:e.style,ref:e.ref||e.value,disabled:e.disabled,key:e.key},e.text)}function n(t,i,o,s){var n,l=!1,r=e.map(t,function(t,i){return l=l||t.value===o,a(e.assign({default:t.value===o,key:i},t))});return n=i.placeholder?e.assign({default:!l,style:{display:"none"},className:s,ref:"placeholder",key:"placeholder-"+i.placeholder.value},i.placeholder):e.assign({default:!l,style:{display:"none"},className:s},{text:"",value:"",ref:"placeholder",key:"noPlaceholder"}),r.unshift(a(n)),r}function l(t){return e.get(t,["compProp","placeholder","value"])}function r(e){return e.compData.value||l(e)}function p(e){return{$validity:e.errorMessage?"invalid":"valid"}}function c(t,i){return t.value===e.get(i,"placeholder.value")}function u(t,i,o){var s=e.get(i,"options",[]);if(e.get(t,"required")&&s.length>0){return!(e.some(s,{value:e.get(o,"value")})&&!c(o,t))}return!1}function d(t){return!!e.get(t,"customValidity")}function h(e,t,i){return{customError:d(e),valueMissing:u(t,i,e),valid:!(d(e)||u(t,i,e))}}function m(t,i){return{validity:h(t,i.props,i.data),validationMessage:e.get(t,"customValidity",""),valid:!t||"valid"===t.$validity}}var v=i.compMixins;return{displayName:"ComboBoxInput",mixins:[v.skinBasedComp,v.runTimeCompData,s.textScaleMixin,i.compMixins.inputFocusMixin,v.compStateMixin(m)],propTypes:{compData:o.Types.Component.compData.isRequired,compProp:o.Types.Component.compProp.isRequired,componentViewMode:o.Types.RenderFlags.componentViewMode,onSelectionChange:t.PropTypes.func,shouldResetComponent:o.Types.RenderFlags.shouldResetComponent,errorMessage:t.PropTypes.string},statics:{useSantaTypes:!0,behaviors:e.assign({change:{methodName:"validate"},setCustomValidity:{methodName:"setCustomValidity",params:["customValidity"]}},i.compMixins.inputFocusMixin.INPUT_FOCUS_BEHAVIORS)},focus:function(){this.refs.collection.focus()},blur:function(){this.refs.collection.blur()},validate:function(){if(this.props.compProp.required&&this.props.compData.options.length>0){var e=!u(this.props.compProp,this.props.compData,this.state);return this.setState({valid:e}),e}return this.handleAction("validate"),this.state.valid||this.setState({valid:!0}),!0},getInitialState:function(){return e.assign(p(this.props),{customValidity:"",value:r(this.props),defaultValue:this.props.compData.value,placeholderValue:l(this.props),valid:!0})},setCustomValidity:function(e){this.setState({customValidity:e})},componentWillReceiveProps:function(t){var i=p(t),o=t.compData.value!==this.state.value,s=l(t)!==this.state.placeholderValue;(o||s||this.props.onSelectionChange)&&e.assign(i,{value:r(t)}),t.shouldResetComponent!==this.props.shouldResetComponent&&(i.customValidity=""),this.setState(i)},onChange:function(t,i){var o=t.target.value;this.updateData({value:o}),this.props.onSelectionChange?(t.type="selectionChanged",t.payload=e.find(this.props.compData.options,{value:o})||{},this.props.onSelectionChange(t,i)):this.setState({value:o,valid:!!o}),this.handleAction("change",t)},onFocus:function(e){this.handleAction("focus",e)},onBlur:function(e){this.handleAction("blur",e)},componentDidUpdate:function(e,t){t.customValidity!==this.state.customValidity&&this.refs.collection.setCustomValidity(this.state.customValidity)},getSkinProperties:function(){var t={};t[this.props.compProp.textAlignment+"-direction"]=!0;var i={};i["padding"+e.capitalize(this.props.compProp.textAlignment)]=this.props.compProp.textPadding;var o=this.props.compData.options;return{"":{onBlur:this.onBlur,className:this.classSet(t),"data-disabled":!!this.props.compProp.isDisabled,"data-error":!this.state.valid&&"editor"!==this.props.componentViewMode,"data-preview":e.isFunction(this.getComponentPreviewState)&&this.getComponentPreviewState()},collection:{defaultValue:-1,disabled:!!e.get(this.props,"compProp.isDisabled"),children:n(o,this.props.compProp,this.state.defaultValue,this.classSet({"placeholder-style":!0})),value:this.state.value,onChange:this.onChange,onFocus:this.onFocus,style:e.merge(i,this.getFontSize()),className:this.isPlaceholderSelected()?this.classSet({"placeholder-style":!0}):"","data-preview":e.isFunction(this.getComponentPreviewState)&&this.getComponentPreviewState()},errorMessage:{children:[this.props.errorMessage]}}},isPlaceholderSelected:function(){return c(this.state,this.props.compProp)}}});
//# sourceMappingURL=comboBoxInput.min.js.map