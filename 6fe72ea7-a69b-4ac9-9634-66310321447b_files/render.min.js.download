"use strict";define("render",["lodash","coreUtils","utils","core","reactDOM","experiment","animations","tweenEngine","TweenMax","TimelineMax","ScrollToPlugin","DrawSVGPlugin"],function(e,i,n,r,t,a,d,o,s,w){function l(e){window.clientSideRender||require(["warmup"],function(i){e(i)})}function c(e,i){var n=i.query,r=n.configName||"fullFunctionality",t=e[r]||e.fullFunctionality,a=t.getConfig();if(!n.dsOrigin)throw new Error("You must define dsOrigin parameter in order to use the documentServices - please speak to html-server team for a key");return a.origin=n.dsOrigin,a}function u(i,r,t){var a=e(t).keys().pull("masterPage").value();return e.mapValues(t,function(e,t){return r&&window.pagesData&&window.pagesData[t]?e:n.dataFixer.fix(e,a.slice(),i.requestModel,i.currentUrl,i.urlFormatModel,"site"===i.viewMode,i.rendererModel.clientSpecMap)})}function p(i,n,a,d,o){l(function(e){e.willRender(n)}),window.clientSideRender&&window.santaRenderingError&&window.parent&&window.parent.postMessage({santaRenderingError:window.santaRenderingError}),r.renderer.renderSite(n,a,d,function(r){if(window.rendered)window.rendered.forceUpdate();else{var a=window.document.getElementById("SITE_CONTAINER").children[0];window.rendered=t.render(r,window.document.getElementById("SITE_CONTAINER"));var d=window.document.getElementById("SITE_CONTAINER").children[0];l(function(e){window.sssr.success=a===d,window.sssr.clientSideRender={sinceInitialTimestamp:Date.now()-window.wixBiSession.initialTimestamp,performanceNow:g()},window.sssr.clientMarkup=d.innerHTML,window.parent&&(window.sssr.success?window.parent.postMessage("sssrSuccess","*"):window.parent.postMessage({sssrFail:{clientMarkup:window.sssr.clientMarkup,serverMarkup:window.sssr.serverMarkup}},"*")),e.didRender(n)}),window.onpopstate=window.rendered.onPopState,window.onhashchange=window.rendered.onHashChange,window.parent!==window&&require(["santaPreview"],function(e){window.rendered.registerAspectToEvent("siteReady",function(){o&&o(window.rendered),window.documentServices&&(window.parent.postMessage("documentServicesLoaded","*"),window.createSantaPreview=e)})}),i.qaAutomation&&(e.set(window,"testApi.domSelectors",i.qaAutomation.getDomSelectors(i.react,i.reactDOM)),window.testApi.domSelectors.setSearchRoot(window.rendered),e.set(window,"testApi.isReady",!0))}})}function S(t,a,l){var c={};i.urlUtils.isQueryParamOn(l.currentUrl,"isSantaEditor")&&(c=e.assign(c,{componentViewMode:"editor"})),l.rendererModel.previewMode&&(c=e.assign(c,{isSocialInteractionAllowed:!1,isPlayingAllowed:!1})),l.renderFlags=e.assign({},l.renderFlags,c);var u=new n.FullSiteData(l),p=o.create(s,w);u.animations=d.create(p);var S=r.SiteDataAPI.createSiteDataAPIAndDal(u,a),m=S.siteData,g=S.siteDataAPI;return{fullSiteData:u,displayedSiteData:m,siteDataWrapper:S,viewerPrivateServices:{pointers:S.pointers,displayedDAL:S.displayedDal,siteDataAPI:g},isServerSideRender:m.isClientAfterSSR(),siteModel:l,siteDataAPI:g}}function m(i,r,t,d,o){var s=S(i,r,t),w=i.documentServices;try{w&&e.isUndefined(window.karmaIntegration)&&a.isOpen("sv_fullstory")&&n.integrations.fullStory.start()}catch(e){}if(w)s.siteDataWrapper.dataLoadedRegistrar=s.siteDataAPI.registerDataLoadedCallback.bind(s.siteDataAPI),window.documentServices=new w.Site(c(w.configs,s.siteModel.currentUrl),s.siteDataWrapper,e.partial(u,s.siteModel,s.isServerSideRender),e.partial(p,i,s.displayedSiteData,s.viewerPrivateServices,d)),e.set(window,"testApi.documentServices",window.documentServices);else{var l=s.fullSiteData.pagesData;s.fullSiteData.pagesData=l&&u(s.siteModel,s.isServerSideRender,l),l.masterPage&&s.siteDataAPI.createDisplayedPage("masterPage"),p(i,s.displayedSiteData,s.viewerPrivateServices,d,o)}}var g="undefined"!=typeof window&&window.performance&&window.performance.now?window.performance.now.bind(window.performance):Date.now.bind(Date);return{clientSide:m}});
//# sourceMappingURL=render.min.js.map