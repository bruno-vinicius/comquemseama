"use strict";define("contactForm",["lodash","santaProps","utils","formCommon","reactDOM","experiment"],function(e,t,i,r,n,a){function s(t){return e.map(t,function(e){return"label_"+e})}function o(e){return e+"FieldLabel"}function l(e){return"hidden_"+o(e)}function u(e){return"required_"+o(e)}function c(e,t,i,r){return{name:e,value:t.value,className:this.classSet(t),placeholder:e,onChange:i,onClick:r}}function d(e){return{notifications:{className:this.classSet({error:e.error,success:!e.error}),children:[e.message]}}}function m(e,t,i){var r=o(e),n=!i[l(e)];return{className:this.classSet({hidden:n}),children:[t[r]]}}function h(t,r,n){var a=i.validationUtils;return!(!t.hidden&&t.required)||("email"===r?a.isValidEmail(n):!e.isEmpty(n))}function p(e,t,i,r,n){return n?F(e,i,r):g(i,e[i],t.errorMessage,t.validationErrorMessage)}function f(t){return e.reduce(e.keys(t),function(e,t){return"notification"===t?e:e&&t},!0)}function F(t,i,r){var n={},a=t[i];return a&&a.error&&(n[i]={error:!0},f(t)&&(n.notifications={error:!1,message:""})),n[i]=e.assign(n[i]||{},{hidden:a.hidden,required:a.required,value:r}),n}function g(e,t,i,r){var n={};return n[e]={error:!0,hidden:t.hidden,required:t.required,value:t.value},n.notifications={message:"email"===e?i:r,error:!0},n}function v(t){var i=t.target.id.replace(this.props.id,"").replace("Field","").toLowerCase();this.setState(e.assign(this.state[i],{error:!1}))}function b(t){var i=t.target.id.replace(this.props.id,"").replace("Field","").toLowerCase();this.setState(e.assign(this.state[i],{value:t.target.value}))}function L(){return e.merge(e.pick(this.translatedKeys,E),{textDirection:"left"})}function q(){return{hidden_emailFieldLabel:!0,hidden_nameFieldLabel:!0,hidden_phoneFieldLabel:!1,hidden_addressFieldLabel:!1,hidden_subjectFieldLabel:!0,hidden_messageFieldLabel:!0,required_emailFieldLabel:!0,required_nameFieldLabel:!0,required_phoneFieldLabel:!1,required_addressFieldLabel:!1,required_subjectFieldLabel:!1,required_messageFieldLabel:!1}}function _(){return e.defaults(e.clone(this.props.compData),L.call(this))}function y(){return e.isEmpty(this.props.compProp)?q():this.props.compProp}function C(t){return e.isEmpty(t.compProp)?q():t.compProp}function S(t){return e.reduce(P,function(e,i){var r=!t[l(i)];return e["$"+i]=r?i+"Hidden":"",e},{})}var P=["name","subject","message","phone","email","address"],E=["nameFieldLabel","emailFieldLabel","phoneFieldLabel","addressFieldLabel","subjectFieldLabel","messageFieldLabel","errorMessage","successMessage","validationErrorMessage"];return{displayName:"ContactForm",mixins:[r.formMixin],propTypes:{compData:t.Types.Component.compData.isRequired,compProp:t.Types.Component.compProp.isRequired},statics:{useSantaTypes:!0},componentWillReceiveProps:function(t){var i=y.call(this),r=C(t),n=S(i),a=S(r);e.isEqual(n,a)||this.setState(a)},getFormInitialState:function(){var t=y.call(this),i={mailSent:!1};e.forEach(P.concat("notifications"),function(e){i[e]={error:!1,hidden:!t[l(e)],required:!!t[u(e)]}}),i.notifications.message="";var r=S(t);return e.merge(i,r)},getFormInputs:function(){return P},getActivityName:function(){return"ContactFormActivity"},getFormFields:function(t,i){return e.reduce(P,function(e,r){var n=y.call(this),a=_.call(this);return n[l(r)]&&(t&&this.state[r].value||!t)&&(e[i?r:a[r+"FieldLabel"]]=this.state[r].value||""),e}.bind(this),{})},getFieldsForActivityReporting:function(){return this.getFormFields(!1,!0)},getFieldLabels:function(){var t=_.call(this);return e.reduce(P,function(e,i){return e[i]=t[i+"FieldLabel"],e},{})},isFormValid:function(){var t=this.state,i=_.call(this),r=e.clone(t),a=this.state.email.value,s=h(t.email,"email",a);r=p(t,i,"email",a,s);var o;return s&&(o=e.reduce(P,function(a,s){var o=n.findDOMNode(this.refs[s+"Field"]).value,l=h(t[s],s.toLowerCase(),o);return r=e.assign(r,p(t,i,s,o,l)),a&&l}.bind(this),!0)),this.setState(r),o},getInputName:function(){return a.isOpen("sendContactFormEmailsViaPong")?this.state.name.value||null:this.state.name.value||"n/a"},getLangKeys:function(e){return i.translations.contactFormTranslations[e]},getFormSkinProperties:function(){var t={},i=_.call(this),r=y.call(this);return e.assign(t,e.zipObject(e.map(P,function(e){return e+"Field"}),e.map(P,function(t){var n=i[o(t)],a=this.state[t],s={required:!!r[u(t)],hidden:!r[l(t)]};return e.merge(a,s),c.call(this,n,a,b.bind(this),v.bind(this))}.bind(this)))),e.assign(t,e.zipObject(s(P),e.map(P,function(e){return m.call(this,e,i,y.call(this))}.bind(this)))),e.assign(t,d.call(this,this.state.notifications)),t}}});
//# sourceMappingURL=contactForm.min.js.map