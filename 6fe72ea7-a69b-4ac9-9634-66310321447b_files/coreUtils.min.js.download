"use strict";var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};define("coreUtils/core/ajaxLibrary",["lodash"],function(t){function e(t){if("function"!=typeof t)throw"ajaxMethod must be a function";n=t}var n=function(){throw"must register ajax function: zepto $.ajax for clientSide, or request() for serverSide"};return{register:e,ajax:function(e){return e.asForm?e.contentType="application/x-www-form-urlencoded":"POST"===e.type&&"json"===e.dataType&&t.isObject(e.data)&&!e.asForm&&t.assign(e,{data:JSON.stringify(e.data),contentType:e.contentType||"application/json; charset=utf-8",processData:!1}),n(e)},get:function(t,e,r,i){if("object"===(void 0===t?"undefined":_typeof(t)))return n(t);var a={url:t};return e&&(a.data=e),r&&(a.success=r),i&&(a.dataType=i),n(a)}}}),define("coreUtils/core/domMeasurements",["zepto","lodash"],function(t,e){function n(t){var e=window.getComputedStyle(t);return{top:parseFloat(e.getPropertyValue("border-top-width"),10),left:parseFloat(e.getPropertyValue("border-left-width"),10)}}function r(t,e){for(var r=t.offsetTop,i=t.offsetLeft,a=t.offsetWidth,o=t.offsetHeight,s={top:0,left:0};t.offsetParent&&(t=t.offsetParent,s=n(t),r+=s.top,i+=s.left,!e||t!==e);)r+=t.offsetTop,i+=t.offsetLeft;return{top:r,left:i,width:a,height:o,bottom:r+o,right:i+a}}function i(t,e,n){n=n||"undefined"!=typeof window&&window;var i=r(t,e);if(n){var a=n.pageYOffset||n.scrollTop||0,o=n.pageXOffset||n.scrollLeft||0;i.top-=a,i.bottom-=a,i.left-=o,i.right-=o}return i}function a(n,i,o,s){return s=s||r(n,i),o=o||t(n).children("div"),e.forEach(o,function(e){var n=r(e,i);n.width>0&&n.height>0&&(n.left<s.left&&(s.left=n.left),n.right>s.right&&(s.right=n.right),n.top<s.top&&(s.top=n.top),n.bottom>s.bottom&&(s.bottom=n.bottom));var o=t(e),c=o.children("div");c.length&&"hidden"!==o.css("overflow")&&a(e,i,c,s)}),s.width=s.right-s.left,s.height=s.bottom-s.top,s}function o(t,e,n){n=n||"undefined"!=typeof window&&window;var r=a(t,e);if(n){var i=n.pageYOffset||n.scrollTop||0,o=n.pageXOffset||n.scrollLeft||0;r.top-=i,r.bottom-=i,r.left-=o,r.right-=o}return r}return{getElementRect:r,getBoundingRect:i,getContentRect:a,getBoundingContentRect:o}}),define("coreUtils/core/languages",[],function(){return["de","en","es","fr","it","ja","ko","pl","ru","nl","tr","sv","pt","no","da","hi","zh","cs"]}),define("coreUtils/core/wixUserApi",["lodash","coreUtils/core/languages","coreUtilsLib"],function(t,e,n){function r(t){var e=a.parseCookieString(t).wixClient;if(e){var n=e.split("|");return{userName:n[0],email:n[1],mailStatus:n[2],permissions:n[3],isSessionNew:n[4],isSessionValid:n[5],userID:n[6]}}return null}function i(t){return a.parseCookieString(t).wixLanguage}var a=n.cookieUtils;return{getUsername:function(t){var e=t.requestModel.cookie,n=r(e);return n?n.userName:null},getLanguage:function(n,r){var a=i(n),o=r.query&&r.query.lang,s=function(){var t=r.host.split(".");return 2===t[0].length?t[0]:null},c=function(){if("undefined"!=typeof window&&void 0!==window.navigator)return window.navigator.language||window.navigator.browserLanguage},u=o||s()||a||c();return u&&(u=u.substring(0,2).toLowerCase()),t.includes(e,u)?u:"en"},isSessionValid:function(t){return!!r(t)},logout:function(t){var e=window.document?window.document.location.host:"";e=e.substring(e.indexOf(".")+1),a.deleteCookie("wixClient",e),"undefined"!=typeof document&&(t.requestModel.cookie=window.document.cookie)},getLanguages:function(){return e}}}),define("coreUtils/core/imageAnalyzer",["lodash"],function(t){function e(){t.forEach(g,function(t){this[t]={}}.bind(this))}function n(t){for(var e=0,n=t.length/4,r=0;r<t.length;r+=4){var i=t[r]/255,a=t[r+1]/255,o=t[r+2]/255;e+=100*Math.max(i,a,o)/n}return e}function r(t){var e=t.data,r=n(e);postMessage(JSON.stringify(r))}function i(){return String(n)+"onmessage = "+String(r)+";"}function a(t,e,n){var r=new window.Image;r.crossOrigin="Anonymous",r.onload=function(){e(r)},r.onerror=n,r.src=t}function o(t,e){var n=window.document.createElement("canvas"),r=n.getContext("2d");return r.drawImage(t,0,0),r.getImageData(0,0,e.width,e.height).data}function s(e,n,r){window.Worker||r("Browser does not support Web Workers");var a=new window.Blob([i()]),o=window.URL.createObjectURL(a),s=new window.Worker(o);s.onmessage=function(e){s.terminate();var i=JSON.parse(e.data);t.isFinite(i)?n(i):r()},s.onerror=r,s.postMessage(e)}function c(t,e,n,r){a(t,function(i){h.setReqStatus(g.BRIGHTNESS,t,m.PENDING),s(o(i,e),n,r)},r)}function u(){var t=window.document.createElement("canvas");return!(!t.getContext||!t.getContext("2d"))}function l(e){var n=h.getResultErrorCallbacks(g.BRIGHTNESS,e);h.remove(g.BRIGHTNESS,e),t.forEach(n,function(t){t()})}function f(e,n){var r=h.getResultSuccessCallbacks(g.BRIGHTNESS,e);h.setReqStatus(g.BRIGHTNESS,e,m.COMPLETE),h.setReqResult(g.BRIGHTNESS,e,n),t.forEach(r,function(t){t(n)}),h.clearResultCallbacks(g.BRIGHTNESS,e)}function d(e,n,r,i){switch(i=i||t.noop,r=r||t.noop,u()||i("HTML5 <canvas> is not supported in this browser"),h.getReqStatus(g.BRIGHTNESS,e)){case m.COMPLETE:r(h.getReqResult(g.BRIGHTNESS,e));break;case null:h.setReqStatus(g.BRIGHTNESS,e,m.INIT),h.registerCallbacksForResult(g.BRIGHTNESS,e,r,i),c(e,n,t.partial(f,e),t.partial(l,e));break;default:h.registerCallbacksForResult(g.BRIGHTNESS,e,r,i)}}var g={BRIGHTNESS:"brightness"},m={INIT:"init",PENDING:"pending",COMPLETE:"complete"};e.prototype={getReqResult:function(t,e){var n=this[t][e];return n&&n.status===m.COMPLETE?n.result:null},setReqResult:function(t,e,n){this[t][e]=this[t][e]||{},this[t][e].result=n},getReqStatus:function(t,e){var n=this[t][e];return n&&n.status||null},setReqStatus:function(t,e,n){this[t][e]=this[t][e]||{},this[t][e].status=n},remove:function(t,e){delete this[t][e]},registerCallbacksForResult:function(t,e,n,r){this[t][e]=this[t][e]||{};var i=this[t][e];i.callbacks=i.callbacks||{onSuccess:[],onError:[]},i.callbacks.onSuccess.push(n),i.callbacks.onError.push(r)},clearResultCallbacks:function(t,e){delete this[t][e].callbacks},getResultSuccessCallbacks:function(t,e){var n=this[t][e];return n&&n.callbacks&&n.callbacks.onSuccess||[]},getResultErrorCallbacks:function(t,e){var n=this[t][e];return n&&n.callbacks&&n.callbacks.onError||[]}};var h=new e;return{getImageMeanBrightness:d}}),define("coreUtils/core/imageUtils",["lodash","imageClientApi","coreUtils/core/imageAnalyzer"],function(t,e,n){function r(e,n){var r=t.get(e,"query",{}),i=t(r).keys().find(function(e){return t.includes(["devicepixelratio"],e.toLowerCase())});return Number(r[i])||n||1}function i(n,i,a,o,s){if(!n.containerWidth||!n.containerHeight||!n.imageData.uri)return{uri:"",css:{}};var c=n.imageData,u=n.displayMode||e.fittingTypes.SCALE_TO_FILL,l=t.defaults(n.quality||{},c.quality);o=r(a,o);var f=t.assign(t.pick(c,["width","height","crop"]),{id:c.uri}),d={width:n.containerWidth,height:n.containerHeight,htmlTag:s||"img",pixelAspectRatio:o,alignment:n.alignType||e.alignTypes.CENTER},g=e.getData(u,f,d,l);return g.uri=i(g.uri),n.addItemProp&&(g.itemProp="image"),g}function a(n,r,i){var a,s,c,u=r.width/r.height,l=i===e.fittingTypes.LEGACY_FIT_WIDTH,f=i===e.fittingTypes.LEGACY_FIT_HEIGHT;return l?(c=n.width/u,a=o(n.width,c)):f?(s=n.height*u,a=o(s,n.height)):a=t.clone(n),a}function o(t,e){return{width:Math.ceil(t),exactWidth:t,height:Math.ceil(e),exactHeight:e}}return{getContainerSize:a,getImageComputedProperties:i,getImageMeanBrightness:n.getImageMeanBrightness}}),define("coreUtils/core/scrollAnchorsUtils",["lodash","coreUtilsLib"],function(t,e){function n(t){var e=parseInt(t,10);return isNaN(e)?0:e}function r(t){return n(t.height.WIX_ADS)+n(t.top.WIX_ADS)}function i(e,n){var i=0,a=n.measureMap;if(a&&e){var o=e.compId,s=t.get(a,"custom.SITE_HEADER.isFixedPosition"),c=a.top[o],u=a.absoluteTop[o],l=s?c:u,f=r(a);i=t.isFinite(l)?l+f:0}return i}function a(t){if(!t.measureMap)return 1/0;var e=t.measureMap,n=e.siteMarginBottom||0,i=r(e),a=e.height.masterPage+n+i+t.renderFlags.extraSiteHeight,o=e.height.screen;return Math.max(a-o,0)}function o(t,e){return Math.min(t,a(e))}function s(n,r,i){var a=i.getPageData(r),o=e.dataUtils.getAllCompsInStructure(a.structure);return t.find(o,function(e){var r=e.connectionQuery;return r&&t.find(a.data.connections_data[r].items,{role:n})})}function c(e,n){var r;if(!t.startsWith(e,"dataItem")&&n){var i=n.getSiteData(),a=s(e,i.getPrimaryPageId(),i);a&&(r=a.dataQuery)}return r||e}function u(t,e){var n=e.getSiteData(),r=l(c(t,e),n);return r.y=o(r.y,n),r}function l(e,r){var a=0;if(e===S.PAGE_ANCHORS.TOP_ANCHOR_ID)a=0;else if(e===S.PAGE_ANCHORS.BOTTOM_ANCHOR_ID)a=n(t.get(r.measureMap,["height","masterPage"]));else if(e){var o=r.getDataByQuery(e,r.getPrimaryPageId());a=i(o,r)}return{x:0,y:a,anchorQuery:e}}function f(e,n){var r=t.find(e.structure.components,{id:n});return r&&r.layout}function d(e,n,r){var i=e.getPageData(n);if(!i)return[];var a=i.data.document_data,o=t.filter(a,{type:"Anchor"});return o.push(g(e.getPrimaryPageId(),r)),t.sortBy(o,function(t){var e=f(i,t.compId);return e?e.y:-99999})}function g(t,e){return{compId:S.PAGE_ANCHORS.TOP_ANCHOR_COMP_ID,id:S.PAGE_ANCHORS.TOP_ANCHOR_ID,name:e||"",type:"Anchor",pageId:t}}function m(e,n){n=n||[];var r=e.getPrimaryPageId(),i=d(e,r),a=t.reject(i,function(e){return t.includes(n,e.compId)});return t.size(a)?a:[i[0]]}function h(e,n){return t(n).map(function(n){var r=l(n.id,e),i=n.id;return t.assign(r,{id:i})}).sortBy("y").value()}function p(t,e,n){return{activeAnchorComp:t,index:e,total:n}}function v(e,n){if(t.every(e,{y:0}))return null;for(var r=null,i=0;i<e.length;i++){var a=e[i];if(!(n>=a.y))break;r=a}return r?p(r,i-1,e.length):null}function y(e,n,r){if(!e.measureMap)return null;var i=m(e,r),o=h(e,i),s=v(o,n);return s&&a(e)<=n?p(t.last(o),o.length-1,o.length):s}function w(t){return t===S.PAGE_ANCHORS.BOTTOM_ANCHOR_ID||t===S.PAGE_ANCHORS.TOP_ANCHOR_ID}var S=e.siteConstants;return{getPageTopAnchor:g,calcAnchorScrollToPosition:u,getPageAnchors:d,getActiveAnchor:y,getAnchor:s,normalizeYOffset:o,isSpecialAnchor:w,getSortedAnchorsByY:h,SCROLL_PAGE_TOP_Y_POS:-99999}}),define("coreUtils/core/anchorTagsGenerator",["lodash","coreUtilsLib"],function(t,e){function n(e,n){if(!t.some(n))return e;var i=r(e);return t.forEach(i.textNodes,t.partial(s,t,n)),i.container.innerHTML}function r(t){var e=d.document.createDocumentFragment(),n=e.appendChild(d.document.createElement("div"));return n.innerHTML=t,{container:n,textNodes:i(n)}}function i(t,e){if(e=e||[],a(t)&&e.push(t),o(t))return e;for(t=t.firstChild;t;)i(t,e),t=t.nextSibling;return e}function a(t){return t.nodeType===d.Node.TEXT_NODE}function o(t){return t.nodeType===d.Node.ELEMENT_NODE&&"a"===t.tagName.toLowerCase()}function s(e,n){var r=[],i=e.parentNode,a=e.data,o=g.findAll(a,n);0!==o.length&&(t(o).orderBy("index","desc").forEach(function(t){r.push(d.document.createTextNode(a.slice(t.index+t.key.length))),r.push(c(t)),a=a.slice(0,t.index)}),r.push(d.document.createTextNode(a)),t.forEach(r.reverse(),function(t){i.insertBefore(t,e)}),i.removeChild(e))}function c(e){var n=u(e),r=d.document.createElement("a");r.innerHTML=e.key,r.classList.add(n.className),t.forEach(t.omit(n,["className"]),function(t,e){r.setAttribute(e,t)});var i=d.document.createElement("object");return i.appendChild(r),i.setAttribute("height",0),i}function u(e){var n={"data-auto-recognition":"true","data-content":e.key,className:"auto-generated-link"};switch(e.pattern){case g.Pattern.PHONE:return t.assign(n,{href:"tel:"+e.value,"data-type":"phone"});case g.Pattern.MAIL:return t.assign(n,{href:"mailto:"+e.value,"data-type":"mail"});case g.Pattern.URL:return t.assign(n,{href:e.value,target:"_blank","data-type":"external"});default:throw"Unknown Pattern: "+e.pattern}}function l(e,n){return t.some(n)?t(r(e).textNodes).map("data").flatMap(t.partial(g.findAll,t,n)).map(u).value():[]}function f(t,e){var n={};return n[m.PHONE]=e,n[m.MAIL]=!0,n[m.URL]=!0,n}var d=e.fragment,g=e.textPatternRecognizer,m=g.Pattern;return{generateAnchorsInHtml:n,findDataForAnchors:l,getIncludedPatterns:f}}),define("coreUtils",["coreUtils/core/ajaxLibrary","coreUtils/core/domMeasurements","coreUtils/core/wixUserApi","coreUtils/core/languages","coreUtils/core/imageUtils","coreUtils/core/scrollAnchorsUtils","coreUtils/core/anchorTagsGenerator","coreUtilsLib"],function(t,e,n,r,i,a,o,s){return{renderDoneMixin:s.renderDoneMixin,htmlTransformer:s.htmlTransformer,textSecurityFixer:s.textSecurityFixer,htmlParser:s.htmlParser,throttleUtils:s.throttleUtils,keyboardUtils:s.keyboardUtils,classNames:s.classNames,cookieUtils:s.cookieUtils,imageUtils:i,tween:s.tween,urlUtils:s.urlUtils,Store:s.Store,mobileViewportFixer:s.mobileViewportFixer,dataUtils:s.dataUtils,dateTimeUtils:s.dateTimeUtils,validationUtils:s.validationUtils,ajaxLibrary:t,cssUtils:s.cssUtils,hashUtils:s.hashUtils,guidUtils:s.guidUtils,arrayUtils:s.arrayUtils,stringUtils:s.stringUtils,mediaZoomCalculations:s.mediaZoomCalculations,objectUtils:s.objectUtils,animationFrame:s.animationFrame,scrollAnchors:a,domMeasurements:e,storage:s.storage,style:s.style,galleriesCommonLayout:s.galleriesCommonLayout,requestsUtil:s.requestsUtil,boundingLayout:s.boundingLayout,verticalMenuCalculations:s.verticalMenuCalculations,nonPageItemZoom:s.nonPageItemZoom,appPartMediaInnerViewNameUtils:s.appPartMediaInnerViewNameUtils,reactComponentUtils:s.reactComponentUtils,dockUtils:s.dockUtils,viewportUtils:s.viewportUtils,containerBackgroundUtils:s.containerBackgroundUtils,math:s.math,functionUtils:s.functionUtils,mediaConsts:s.mediaConsts,balataConsts:s.mediaConsts.balataConsts,blogAppPartNames:s.blogAppPartNames,wixUserApi:n,languages:r,siteConstants:s.siteConstants,textPatternRecognizer:s.textPatternRecognizer,anchorTagsGenerator:o,errorPages:s.errorPages,logWixCodeConsoleMessage:s.logWixCodeConsoleMessage,matrix:{calculations:s.matrix.calculations,scalingCalculations:s.matrix.scalingCalculations},fragment:s.fragment,dynamicPagesUtils:s.dynamicPagesUtils,Screenfull:s.Screenfull,SimpleDrag:s.SimpleDrag}});
//# sourceMappingURL=coreUtils.min.js.map